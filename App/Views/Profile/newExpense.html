{% extends 'base.html' %}

{% block title %}Dodawanie wydatku{% endblock %}

{% block header %}
<!-- Navbar Section -->
<section class="register">
    <nav class="navbar">
        <div class="container-fluid">
            <a class="navbar-brand"><i class="fa-sharp fa-solid fa-coins navbar-img"></i>smartBudget</a>
            {% for message in flash_messages %}
                <p class="text-{{ message.type }} border border-{{ message.type }} flash">{{ message.body }}</p>
            {% endfor %}
        </div>
    </nav>
</section>
{% endblock %}

{% block body %}
<!-- Setuo data for new expense Section -->
<section id="data-setup">
    <div class="row">
        <div class="col-lg-12">
            <h2>Dodawanie nowego wydatku</h2>
        </div>
        <div class="col-lg-12">
            <form action="/profile/saveExpense" method="post" id="formNewExpense">
                <input name="userId" type="hidden" value="{{ user.id }}" />
                <input name="amount" type="number" class="form-control my-input" placeholder="Kwota" min="0" step="0.01" required>
                <input id="dateField" name="date" type="date" class="form-control my-input" placeholder="Data" min="2000-01-01" max="{{ today }}" required>
                <select name="category" class="form-select my-input" required>
                    {% if user.expensesCategories is not empty %}
                            {% for categories in user.expensesCategories %}
                                {% for category in categories %}
                                <option value='{{ category }}'>{{ category }}</option>
                                {% endfor %}
                            {% endfor %}
                        </ul>
                    {% endif %}
                </select>
                <select name="payment" class="form-select my-input" required>
                    {% if user.paymentMethods is not empty %}
                            {% for methods in user.paymentMethods %}
                                {% for method in methods %}
                                <option value='{{ method }}'>{{ method }}</option>
                                {% endfor %}
                            {% endfor %}
                        </ul>
                    {% endif %}
                </select>
                <textarea name="comment" class="form-control my-input comentary-input" placeholder="Komentarz (opcjonalnie)"></textarea>
                <button class="btn btn-success btn-submit" type="submit">Dodaj</button>
                <a href="/profile/show">
                    <button class="btn btn-danger btn-submit" type="button">Anuluj</button>
                </a>
            </form>
        </div>
    </div>
</section>

{% if user.errors is not empty %}
<p>Błędy:</p>
<ul>
    {% for error in user.errors %}
    <li>{{ error }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endblock %}